---
layout:     post
title:      Javascript의 React-Router withRouter란
author:     쭌프로
tags: 		  JavaScript
subtitle:   JavaScript 공부 노트
category:   JavaScript ReactJS
---
<!-- Start Writing Below in Markdown -->

<div class="box">
  <div class="small-title">React-Router 의 withRouter 관련글을 쓰는 이유</div>
  <p>React 공부를 학원을 안다니고 옛날 인강 && 블로그 자료로 독학을 하다보니 최신 업데이트 자료가 아닌 구버전 자료로 지식을 습득했습니다.</p>
  <p>그러다 보니 블로그 예제대로 실행을 해보면 빈번하게 오류가 나서 그 부분만 구글링 && stack overflow 직접찾아 버전을 업그레이드 하고 다시 적용 시키면서 독학을 하고있습니다.</p>
  <p>이번에 블로그 예제를 보면서 작업하는 도중</p>
  <div class="pro-txt">
    <a href="https://velopert.com/1954" target="_balnk">VELOPERT.LOG 님의 React 프로젝트 예제</a>
  </div>
  <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">import&nbsp;React&nbsp;from&nbsp;<span style="color:#ffd500">'react'</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">import&nbsp;{&nbsp;Route&nbsp;}&nbsp;from&nbsp;<span style="color:#ffd500">"react-router-dom"</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">import&nbsp;{&nbsp;Header&nbsp;}&nbsp;from&nbsp;<span style="color:#ffd500">'../components'</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">class&nbsp;App&nbsp;extends&nbsp;React.Component&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;render()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;re&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>(login<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>register)<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;isAuth&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;re.test(this.props.<span style="color:#4be6fa">location</span>.pathname);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>div<span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isAuth&nbsp;?&nbsp;undefined&nbsp;:&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>Header<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>div<span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">export&nbsp;<span style="color:#ff3399">default</span>&nbsp;App;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
  <p>이부분에서 해당 링크의 pathname 을 가져와 조건문으로 비교해야하는 부분이 있었습니다.</p>
  <p>이부분을 최신버전(React-Router-v4) 버전으로 적용하여 실행하면 pathname 을 찾을 수 없다는 문구가 나옵니다.</p>
  <div class="img-box">
    <img src="https://alalstjr.github.io/jjunpro.github.io/img/2019-1-18-1.png" alt="자바스크립트 출력확인" />
  </div>
  <p>구글링을 찾아본 결과</p>
  <div class="pro-txt">
    <a href="https://stackoverflow.com/questions/42253277/react-router-v4-how-to-get-current-route" target="_balnk">
      React Router v4 - How to get current route?
    </a>
  </div>
  <p>stack overflow 의 질문글을 보고 아하! React-Router-4 버전 이후부터는 withRouter 사용하여 가져와야 하는구나 했습니다.</p>
  <p>바로 React-Router 홈페이지로 접속하여 React-Router-4 버전의 withRouter란 무엇인지 그리고 사용방법을 보고 오류나는 부분을 수정했습니다.</p>
</div>

<div class="box">
  <div class="small-title">withRouter 고차원 컴포넌트 란?</div>
  <p>withRouter 고차원 컴포넌트를 통해 history 객체의 속성과 가장 가까운 <Route> 의 match 액세스 할 수 있습니다.</p>
  <p>withRouter는 <Route> render props : { match, location, history } 와 같은 props로써 경로가 변경 될 때마다 해당 구성 요소를 다시 렌더링합니다.</p>
  <p>withRouter는 주로 history에 접근하여 컴포넌트에서 라우터를 조작하는 데 사용합니다.</p>
</div>

<div class="box">
  <p>withRouter 를 추가하여 location.pathname 을 출력해 보겠습니다.</p>
  <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%">import&nbsp;React&nbsp;from&nbsp;<span style="color:#ffd500">'react'</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">import&nbsp;{&nbsp;Route,&nbsp;withRouter&nbsp;}&nbsp;from&nbsp;<span style="color:#ffd500">"react-router-dom"</span>;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;withRouter&nbsp;를&nbsp;추가</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">import&nbsp;{&nbsp;Header&nbsp;}&nbsp;from&nbsp;<span style="color:#ffd500">'../components'</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">class&nbsp;App&nbsp;extends&nbsp;React.Component&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;render()&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;re&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>(login<span style="color:#0086b3"></span><span style="color:#ff3399">|</span>register)<span style="color:#0086b3"></span><span style="color:#ff3399">/</span>;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;isAuth&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;re.test(this.props.<span style="color:#4be6fa">location</span>.pathname);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>div<span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isAuth&nbsp;?&nbsp;undefined&nbsp;:&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>Header<span style="color:#0086b3"></span><span style="color:#ff3399">/</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{this.props.<span style="color:#4be6fa">location</span>.pathname}&nbsp;<span style="color:#999999">//&nbsp;정상적으로&nbsp;pathname&nbsp;을&nbsp;출력하는것을&nbsp;확인할&nbsp;수&nbsp;있습니다.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span><span style="color:#0086b3"></span><span style="color:#ff3399">/</span>div<span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">export&nbsp;<span style="color:#ff3399">default</span>&nbsp;withRouter(App);&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;withRouter&nbsp;를&nbsp;추가</span></div></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
  <p>정상적으로 location.pathname 을 출력하는 것을 확인할 수 있습니다.</p>
  <p>withRouter 외에도 여러가지 2-3버전과 4 버전이 다르므로 꼭 확인하며 프로그래밍 하는것이 좋습니다.</p>
  <p>독학이란 넘모 어려운것..</p>
</div>
