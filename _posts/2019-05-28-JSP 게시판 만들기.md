---
layout:     post
title:      JSP 게시판 만들기
author:     쭌프로
tags:       JAVA
subtitle:   JSP 연습
category:   JAVA
---

<!-- Start Writing Below in Markdown -->

![Description](https://alalstjr.github.io/jjunpro.github.io/img/java_bg.png)

# 파일 업로드

1. jsp자체에는 파일 업로드 기능이 기본적으로 포함되어 있지 않음으로 외부 라이브러리를 사용해야 한다.
  - 라이브러리가 오래됐지만 연습목적이기 때문에 우선 이 라이브 러리를 사용합니다. <br/>
  - 링크 : http://servlet.com/cos 
  
2. 파일 업로드 방법
  - 파일을 테이블의 <b>blob 컬럼</b>에 직접 저장하는 방식
  - 파일정보만 테이블에 저장하고 실제 파일은 디렉토리에 저장하는 방식

## view 

WebContent/board/upload.jsp

<script src="https://gist.github.com/alalstjr/f52ce1aa7a137e625f306848a874385c.js"></script>

누군가에게 업로드를 허용하거나, 업로드한 파일에 대한 모든 조작을 할 수 있습니다.
이를 방지하기 위해서 POST 방식으로 파일을 전송하도록 합니다.

> enctype="multipart/form-data"
파일은 대용량으로 서버로 보내집니다.
이것을 한번에 보내는것이 아닌 여러개의 조각으로 나눠서 보내는 설정이 enctype 속성

## view - result

WebContent/board/upload_result.jsp

<script src="https://gist.github.com/alalstjr/159a3affd123362ff7bf2281358c0173.js"></script>

Enumeration files 로 인해서 중복된 파일을 올려도 자동 처리해줍니다.

# 게시판

1. 게시판 만들기의 중요성
  - CRUD(글쓰기, 목록/상세, 수정, 삭제)
  - 검색기능
  - 페이지나누기
  - 파일 업로드, 다운로드
  - 댓글 달기
  - 답변 달기

2. 게시판의 파일 구조
  - Contoller
    - BoardController.java
      
  - Model
    - Pager.java
    - Constants.java
    CharsetDetector.java
    BoardDTO.java
    BoardCommentDTO.java
    BoardDAO.java
    board.xml
      
  - View
    index.jsp : 시작페이지
    list.jsp : 게시판 목록
    write.jsp : 글쓰기
    webshell.jsp : 파일 업로드 보안 테스트
    comment_list.jsp : 댓글 목록
    edit.jsp : 수정 삭제 기능
    reply.jsp : 답변 달기
    search.jsp : 검색 페이지
    

# 참고자료

<a href="https://m.blog.naver.com/PostView.nhn?blogId=rlasksdud53&logNo=220595010315&proxyReferer=https%3A%2F%2Fwww.google.com%2F">
  clob/blob 자료형이란?
</a>
<a href="http://www.lug.or.kr/files/docs/PHP/features.file-upload.post-method.html">
  파일업로드 post방식인 이유
</a>
