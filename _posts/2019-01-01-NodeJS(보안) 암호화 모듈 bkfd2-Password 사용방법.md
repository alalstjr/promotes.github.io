---
layout:     post
title:      Javascript의 암호화 모듈 bkfd2-Password 사용방법
author:     쭌프로
tags: 		  JavaScript
subtitle:   JavaScript 공부 노트
category:   JavaScript NodeJS
---
<!-- Start Writing Below in Markdown -->

<div class="box">
  <p>어느새 2018년이 지나고 2019년의 해가 시작되었습니다.</p>
  <p>빠르게 변화되어가는 세상만큼 저도 빠르게 적응해야 하기때문에 마음이 조급합니다..</p>
  <p>이제 슬슬 서버 NodeJS도 공부를 시작해 볼까합니다.</p>
  <p>이제부터는 개인 공책(Note) 형식으로 올릴 생각입니다.</p>
  <p>모듈을 사용하고 나중에도 '아하! 이렇게 사용하고 이것때문에 사용하는거였구나!' 를 쉽게 찾아보기 위해서 입니다.</p>
</div>

<div class="box">
  <div class="small-title">강력한 암호화 모듈 pbkdf2-password</div>
  <p>암호화 모듈은 여러개 존재합니다. (모듈 md5 는 권장하지 않습니다.)</p>
  <p>그중에서 제가 사용할 모듈은 pbkdf2-password 입니다.</p>
  <p>암호화 모듈의 정확한 설명 그리고 md5 의 사용을 권장하지 않는 이유가 궁금하시면 아래 링크 NAVER D2 를 확인해 주세요.</p>
  <div class="pro-txt">
    <a href="https://d2.naver.com/helloworld/318732" target="_balnk">NAVER D2 안전한 패스워드 저장</a>
  </div>
</div>

<div class="box">
  <div class="small-title">1. 설치 방법</div>
  <div class="pro-txt">
    <a href="https://www.npmjs.com/package/pbkdf2-password" target="_balnk">NPM-pbkdf2-password 링크</a>
  </div>
  <p>NPM 링크에는 간단한 설치방법과 사용설명이 있으니 참고하여 모듈을 설치해 주시기 바랍니다.</p>
</div>

<div class="box">
  <div class="small-title">2. 비밀번호 암호화하여 저장하기</div>
  <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">//&nbsp;암호화&nbsp;모듈</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">const&nbsp;bkfd2Password&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;require(<span style="color:#ffd500">"pbkdf2-password"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">var</span>&nbsp;hasher&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;bkfd2Password();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">var</span>&nbsp;opts&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;password:&nbsp;<span style="color:#ffd500">"hello"</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//&nbsp;예제로&nbsp;hello&nbsp;가&nbsp;들어가있지만&nbsp;실전에서는&nbsp;회원가입시&nbsp;작성한&nbsp;비밀번호가&nbsp;들어갑니다.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">};</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">hasher(opts,&nbsp;<span style="color:#ff3399">function</span>(err,&nbsp;pass,&nbsp;salt,&nbsp;hash)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#4be6fa">console</span>.log(err,pass,salt,hash);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;결과를&nbsp;확인해&nbsp;보면</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;err&nbsp;:&nbsp;null</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;pass&nbsp;:&nbsp;hello</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;salt&nbsp;:&nbsp;RMAkc10xkSIdwjypjfdYsHxsVa53ENxWxEenJF0upbq8CIYLOvNC6pPo0xq+cJsWNqX9eixWFvgS8+9wFBCLsQ==</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;hash&nbsp;:&nbsp;0iJcqVnHwM6gYqT7l7OcABm6E29PVD1FchyPq+2co4Z8t1zQRj3RCE9qKA6yWvcLjERc3xBuJq6MpyAEwgvhacrKjylnhoU7+E0gAFj2ahVfzUeWUr3CQRK8SVur3kBkcHO/HkD58cx8mLGf+rFeSLhSqmSHZ5Gdick93WzXUaI=</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">});</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
  
  <p>hasher() 함수로 인해서 err, pass, salt, hash 값을 받은것을 확인할 수 있습니다.</p>
  <p>이중에서 서버에 사용자 정보에 넣을 것은 slat 와 hash 값 입니다.</p>
  <p>slat 는 slat 로넣고 hash값은 Password 값에 넣습니다.</p>
  <p>간단하게 예제로 보면</p>
  <div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">var</span>&nbsp;users&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;[</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;:&nbsp;<span style="color:#ffd500">'alalstjr'</span>,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password&nbsp;:&nbsp;<span style="color:#ffd500">'0iJcqVnHwM6gYqT7l7OcABm6E29PVD1FchyPq+2co4Z8t1zQRj3RCE9qKA6yWvcLjERc3xBuJq6MpyAEwgvhacrKjylnhoU7+E0gAFj2ahVfzUeWUr3CQRK8SVur3kBkcHO/HkD58cx8mLGf+rFeSLhSqmSHZ5Gdick93WzXUaI='</span>,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;salt&nbsp;:&nbsp;<span style="color:#ffd500">'RMAkc10xkSIdwjypjfdYsHxsVa53ENxWxEenJF0upbq8CIYLOvNC6pPo0xq+cJsWNqX9eixWFvgS8+9wFBCLsQ=='</span>,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;},</div><div style="padding:0 6px; white-space:pre; line-height:130%">]</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
  <p>이런 형식으로 서버에 유저정보가 저장될것입니다.</p>
  <p>서버에 유저정보가 저장됐으니 로그인시 정보가 맞는지 확인하는 코드도 제작해 보겠습니다.</p>
</div>

<div class="box">
  <div class="small-title">3. 로그인 체크하기</div>
<div class="colorscripter-code" style="color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important; overflow:auto"><table class="colorscripter-code-table" style="margin:0; padding:0; border:none; background-color:#272727; border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px; border-right:2px solid #4f4f4f"><div style="margin:0; padding:0; word-break:normal; text-align:right; color:#aaa; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div></div></td><td style="padding:6px 0"><div style="margin:0; padding:0; color:#f0f0f0; font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#ff3399">var</span>&nbsp;users&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;[</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;:&nbsp;<span style="color:#ffd500">'alalstjr'</span>,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password&nbsp;:&nbsp;<span style="color:#ffd500">'0iJcqVnHwM6gYqT7l7OcABm6E29PVD1FchyPq+2co4Z8t1zQRj3RCE9qKA6yWvcLjERc3xBuJq6MpyAEwgvhacrKjylnhoU7+E0gAFj2ahVfzUeWUr3CQRK8SVur3kBkcHO/HkD58cx8mLGf+rFeSLhSqmSHZ5Gdick93WzXUaI='</span>,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;salt&nbsp;:&nbsp;<span style="color:#ffd500">'RMAkc10xkSIdwjypjfdYsHxsVa53ENxWxEenJF0upbq8CIYLOvNC6pPo0xq+cJsWNqX9eixWFvgS8+9wFBCLsQ=='</span>,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;},</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;사용자의&nbsp;아이디와&nbsp;비밀번호&nbsp;그리고&nbsp;salt&nbsp;값이&nbsp;저장되어&nbsp;있습니다.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;3가지&nbsp;값을&nbsp;hasher()&nbsp;함수로&nbsp;활용해서&nbsp;다시한번&nbsp;값을&nbsp;비교합니다.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">];</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">app.post(<span style="color:#ffd500">'/login'</span>,&nbsp;(req,&nbsp;res)&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;id&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;req.body.id;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;사용자가&nbsp;입력한&nbsp;ID값</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">var</span>&nbsp;ps&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;req.body.ps;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;사용자가&nbsp;입력한&nbsp;Password값</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">for</span>(<span style="color:#ff3399">var</span>&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;<span style="color:#c10aff">0</span>,&nbsp;l&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;users.<span style="color:#4be6fa">length</span>;&nbsp;i&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">&lt;</span>&nbsp;l;&nbsp;i<span style="color:#0086b3"></span><span style="color:#ff3399">+</span><span style="color:#0086b3"></span><span style="color:#ff3399">+</span>&nbsp;)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;등록된&nbsp;수저&nbsp;수&nbsp;만큼&nbsp;반복합니다.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>(&nbsp;users[i].id&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;id&nbsp;)&nbsp;{&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;입력한&nbsp;아이디가&nbsp;있는지&nbsp;확인합니다.&nbsp;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">return</span>&nbsp;hasher({password:ps,&nbsp;salt:users[i].salt},&nbsp;(err,&nbsp;pass,&nbsp;salt,&nbsp;hash)&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;return&nbsp;하는&nbsp;이유는&nbsp;아래에&nbsp;redirect&nbsp;로&nbsp;링크&nbsp;이동을&nbsp;해도&nbsp;반복문이&nbsp;끝나지&nbsp;않기때문에&nbsp;return&nbsp;으로&nbsp;끈어줘야&nbsp;합니다.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;hasher&nbsp;매개&nbsp;변수로&nbsp;사용자가&nbsp;입력한&nbsp;ps&nbsp;값을&nbsp;그리고&nbsp;서버에&nbsp;저장된&nbsp;유저의&nbsp;salt&nbsp;값을&nbsp;넣습니다.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff3399">if</span>(&nbsp;hash&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;users[i].ps&nbsp;)&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;hasher()&nbsp;함수에서&nbsp;출력된&nbsp;hash&nbsp;값과&nbsp;서버에&nbsp;저장된(users)&nbsp;password&nbsp;값이&nbsp;동일하다면&nbsp;true&nbsp;를&nbsp;반환합니다.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;req.session.displayName&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span>&nbsp;users[i].dn;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;session&nbsp;값에&nbsp;displayName&nbsp;값을&nbsp;저장</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;req.session.save(()&nbsp;<span style="color:#0086b3"></span><span style="color:#ff3399">=</span><span style="color:#0086b3"></span><span style="color:#ff3399">&gt;</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res.redirect(<span style="color:#ffd500">'/index'</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;조건이&nbsp;맞다면&nbsp;return으로&nbsp;반복문을&nbsp;중지하고&nbsp;실행</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;res.send(<span style="color:#ffd500">'로그인&nbsp;실패!'</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;아이디&nbsp;비밀번호&nbsp;둘다&nbsp;없거나&nbsp;다르면&nbsp;로그인&nbsp;실패를&nbsp;출력합니다.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">});</div></div><div style="text-align:right; margin-top:-13px; margin-right:5px; font-size:9px; font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#4f4f4f; text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom; padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none; color:white"><span style="font-size:9px; word-break:normal; background-color:#4f4f4f; color:white; border-radius:10px; padding:1px">cs</span></a></td></tr></table></div>
</div>

